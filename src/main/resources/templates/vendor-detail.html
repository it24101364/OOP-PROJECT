<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ForeverWed - Vendor Detail</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <link rel="stylesheet" th:href="@{/css/vendor-detail.css}">
</head>
<body>
<!-- Header -->
<nav class="navbar navbar-expand-lg">
    <div class="container">
        <a class="navbar-brand" href="/">Forever<span>Wed</span></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/">Home</a>
                <a class="nav-link active" href="/vendors">Vendors</a>
                <a class="nav-link" href="/planning-tools">Planning Tools</a>
                <a class="nav-link" href="/inspiration">Inspiration</a>
                <a class="nav-link" href="/about-us">About Us</a>
            </div>
            <div class="ms-3">
                <a href="/login" class="btn btn-outline-primary me-2">Login</a>
                <a href="/signup" class="btn btn-primary">Sign Up</a>
            </div>
        </div>
    </div>
</nav>

<!-- Breadcrumb -->
<div class="container mt-4">
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="/">Home</a></li>
            <li class="breadcrumb-item"><a href="/vendors">Vendors</a></li>
            <li class="breadcrumb-item active" aria-current="page" th:text="${vendor.name}">Vendor Name</li>
        </ol>
    </nav>
</div>

<!-- Vendor Detail Section -->
<section class="vendor-detail-section py-5">
    <div class="container">
        <div class="row">
            <!-- Vendor Images Column -->
            <div class="col-lg-7 mb-4">
                <div class="vendor-gallery">
                    <div class="main-image mb-3">
                        <img th:src="${vendor.imageUrl}" alt="Vendor Main Image" class="img-fluid rounded">
                    </div>
                    <div class="gallery-thumbnails d-flex flex-wrap" th:if="${vendor.galleryImages != null and !vendor.galleryImages.empty}">
                        <div class="thumbnail me-2 mb-2" th:each="image : ${vendor.galleryImages}">
                            <img th:src="${image}" alt="Gallery Image" class="img-fluid rounded">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Vendor Info Column -->
            <div class="col-lg-5">
                <div class="vendor-detail-info">
                    <div class="mb-4">
                        <h1 class="vendor-detail-name" th:text="${vendor.name}">Vendor Name</h1>
                        <div class="vendor-tags mb-3">
                            <span class="vendor-tag" th:text="${vendor.category}">Category</span>
                            <span class="vendor-tag" th:each="location : ${vendor.locations}" th:text="${location}">Location</span>
                        </div>
                        <div class="vendor-rating d-flex align-items-center mb-3">
                            <div class="rating-stars" th:data-rating="${vendor.rating}">
                                <!-- Stars will be generated by JavaScript -->
                            </div>
                            <div class="review-count ms-2" th:text="'(' + ${vendor.reviewCount} + ' reviews)'"></div>
                        </div>
                        <div class="vendor-price mb-3">
                            <span class="price-label">Price Range:</span>
                            <span class="price-value" th:text="${vendor.priceLevelDisplay}">$$$</span>
                        </div>
                    </div>

                    <div class="vendor-contact mb-4">
                        <h4>Contact Information</h4>
                        <p th:if="${vendor.phone}"><i class="fas fa-phone me-2"></i><span th:text="${vendor.phone}">Phone Number</span></p>
                        <p th:if="${vendor.email}"><i class="fas fa-envelope me-2"></i><span th:text="${vendor.email}">Email Address</span></p>
                        <p th:if="${vendor.website}"><i class="fas fa-globe me-2"></i><a th:href="${vendor.website}" th:text="${vendor.website}" target="_blank">Website</a></p>
                    </div>

                    <div class="booking-section">
                        <button class="btn btn-primary btn-lg w-100" id="checkAvailability">Check Availability</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Vendor Description and Details -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="vendor-tabs">
                    <ul class="nav nav-tabs" id="vendorTab" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="about-tab" data-bs-toggle="tab" data-bs-target="#about" type="button" role="tab">About</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="services-tab" data-bs-toggle="tab" data-bs-target="#services" type="button" role="tab">Services</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab">Reviews</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="faq-tab" data-bs-toggle="tab" data-bs-target="#faq" type="button" role="tab">FAQ</button>
                        </li>
                    </ul>
                    <div class="tab-content p-4 border border-top-0 rounded-bottom" id="vendorTabContent">
                        <!-- About Tab -->
                        <div class="tab-pane fade show active" id="about" role="tabpanel" aria-labelledby="about-tab">
                            <h4>About this Vendor</h4>
                            <p th:text="${vendor.description}">Vendor description will appear here.</p>
                            <div th:if="${vendor.additionalDescription}" th:utext="${vendor.additionalDescription}">
                                Additional description information.
                            </div>
                        </div>

                        <!-- Services Tab -->
                        <div class="tab-pane fade" id="services" role="tabpanel" aria-labelledby="services-tab">
                            <h4>Services Offered</h4>
                            <div th:if="${vendor.services != null and !vendor.services.empty}">
                                <div class="row">
                                    <div class="col-md-6 mb-4" th:each="service : ${vendor.services}">
                                        <div class="service-card">
                                            <h5 th:text="${service.name}">Service Name</h5>
                                            <p th:text="${service.description}">Service description</p>
                                            <div class="service-price" th:text="${service.price}">Price</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p th:if="${vendor.services == null or vendor.services.empty}">No detailed services information is available. Please contact the vendor for specific service details.</p>
                        </div>

                        <!-- Reviews Tab -->
                        <div class="tab-pane fade" id="reviews" role="tabpanel" aria-labelledby="reviews-tab">
                            <div class="reviews-header d-flex justify-content-between align-items-center mb-4">
                                <h4>Customer Reviews</h4>
                                <button class="btn btn-outline-primary" id="writeReview">Write a Review</button>
                            </div>

                            <div th:if="${vendor.reviews != null and !vendor.reviews.empty}">
                                <div class="review-item mb-4 pb-4 border-bottom" th:each="review : ${vendor.reviews}">
                                    <div class="reviewer-info d-flex align-items-center mb-2">
                                        <div class="reviewer-avatar">
                                            <img th:src="${review.avatarUrl}" alt="Reviewer" class="rounded-circle" width="50" height="50">
                                        </div>
                                        <div class="ms-3">
                                            <h5 class="reviewer-name mb-0" th:text="${review.name}">Reviewer Name</h5>
                                            <div class="review-date" th:text="${review.date}">Review Date</div>
                                        </div>
                                    </div>
                                    <div class="rating-stars mb-2" th:data-rating="${review.rating}"></div>
                                    <p class="review-text" th:text="${review.text}">Review text</p>
                                </div>
                            </div>
                            <p th:if="${vendor.reviews == null or vendor.reviews.empty}">No reviews yet. Be the first to write a review!</p>
                        </div>

                        <!-- FAQ Tab -->
                        <div class="tab-pane fade" id="faq" role="tabpanel" aria-labelledby="faq-tab">
                            <h4>Frequently Asked Questions</h4>
                            <div th:if="${vendor.faqs != null and !vendor.faqs.empty}">
                                <div class="accordion" id="faqAccordion">
                                    <div class="accordion-item" th:each="faq, faqStat : ${vendor.faqs}">
                                        <h2 class="accordion-header" th:id="'faqHeading' + ${faqStat.index}">
                                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse"
                                                    th:data-bs-target="'#faqCollapse' + ${faqStat.index}" aria-expanded="false"
                                                    th:aria-controls="'faqCollapse' + ${faqStat.index}" th:text="${faq.question}">
                                                Question
                                            </button>
                                        </h2>
                                        <div th:id="'faqCollapse' + ${faqStat.index}" class="accordion-collapse collapse"
                                             th:aria-labelledby="'faqHeading' + ${faqStat.index}" data-bs-parent="#faqAccordion">
                                            <div class="accordion-body" th:text="${faq.answer}">
                                                Answer
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <p th:if="${vendor.faqs == null or vendor.faqs.empty}">No FAQ information available for this vendor.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Similar Vendors Section -->
        <div class="similar-vendors mt-5">
            <h3 class="section-title">Similar Vendors</h3>
            <div class="row">
                <div class="col-md-4 mb-4" th:each="similarVendor : ${similarVendors}">
                    <div class="vendor-card">
                        <div class="vendor-image">
                            <img th:src="${similarVendor.imageUrl}" alt="Vendor">
                            <div class="price-tag" th:text="${similarVendor.priceLevelDisplay}">$$$</div>
                        </div>
                        <div class="vendor-info">
                            <h3 class="vendor-name" th:text="${similarVendor.name}">Vendor Name</h3>
                            <div class="vendor-tags">
                                <span class="vendor-tag" th:text="${similarVendor.category}">Category</span>
                            </div>
                            <div class="vendor-rating">
                                <div class="rating-stars" th:data-rating="${similarVendor.rating}"></div>
                                <div class="review-count" th:text="'(' + ${similarVendor.reviewCount} + ')'"></div>
                            </div>
                            <a th:href="@{/vendors/{id}(id=${similarVendor.id})}" class="book-btn">View Details</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Booking Modal -->
<div class="modal fade" id="bookingModal" tabindex="-1" aria-labelledby="bookingModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="bookingModalLabel">Check Availability & Book</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form id="bookingForm">
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="eventDate" class="form-label">Event Date</label>
                            <input type="date" class="form-control" id="eventDate" required>
                        </div>
                        <div class="col-md-6">
                            <label for="eventType" class="form-label">Event Type</label>
                            <select class="form-select" id="eventType" required>
                                <option value="">Select Event Type</option>
                                <option value="wedding">Wedding</option>
                                <option value="engagement">Engagement</option>
                                <option value="reception">Reception</option>
                                <option value="other">Other</option>
                            </select>
                        </div>
                    </div>
                    <div class="row mb-3">
                        <div class="col-md-6">
                            <label for="name" class="form-label">Your Name</label>
                            <input type="text" class="form-control" id="name" required>
                        </div>
                        <div class="col-md-6">
                            <label for="email" class="form-label">Email Address</label>
                            <input type="email" class="form-control" id="email" required>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label for="phone" class="form-label">Phone Number</label>
                        <input type="tel" class="form-control" id="phone" required>
                    </div>
                    <div class="mb-3">
                        <label for="message" class="form-label">Additional Information</label>
                        <textarea class="form-control" id="message" rows="3"></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary" id="submitBooking">Submit Request</button>
            </div>
        </div>
    </div>
</div>

<!-- Footer -->
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-3 mb-4">
                <h4 class="footer-title">Dream Wedding</h4>
                <p>Making your special day perfect with the best vendors and planning tools.</p>
                <div class="social-links">
                    <a href="#" class="social-link"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-pinterest"></i></a>
                    <a href="#" class="social-link"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
            <div class="col-md-3 mb-4">
                <h4 class="footer-title">Quick Links</h4>
                <ul class="footer-links">
                    <li><a href="/">Home</a></li>
                    <li><a href="/vendors">Vendors</a></li>
                    <li><a href="/blog">Blog</a></li>
                    <li><a href="/contact">Contact</a></li>
                </ul>
            </div>
            <div class="col-md-3 mb-4">
                <h4 class="footer-title">Vendor Categories</h4>
                <ul class="footer-links">
                    <li><a href="/vendors?category=Photography">Photographers</a></li>
                    <li><a href="/vendors?category=Venue">Venues</a></li>
                    <li><a href="/vendors?category=Catering">Catering</a></li>
                    <li><a href="/vendors?category=Wedding Planners">Wedding Planners</a></li>
                </ul>
            </div>
            <div class="col-md-3 mb-4">
                <h4 class="footer-title">Subscribe</h4>
                <p>Get wedding planning tips and vendor updates.</p>
                <form>
                    <div class="input-group mb-3">
                        <input type="email" class="form-control" placeholder="Your Email" aria-label="Your Email">
                        <button class="btn btn-primary" type="button">Subscribe</button>
                    </div>
                </form>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Dream Wedding. All Rights Reserved.</p>
        </div>
    </div>
</footer>

<!-- Bootstrap JS -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.bundle.min.js"></script>
<!-- Custom JS -->
<script th:src="@{/js/main.js}"></script>
<script th:src="@{/js/vendor-detail.js}"></script>

<script>
    // Initialize booking modal
    document.addEventListener('DOMContentLoaded', function() {
        const checkAvailabilityBtn = document.getElementById('checkAvailability');
        if (checkAvailabilityBtn) {
            checkAvailabilityBtn.addEventListener('click', function() {
                const bookingModal = new bootstrap.Modal(document.getElementById('bookingModal'));
                bookingModal.show();
            });
        }

        const submitBookingBtn = document.getElementById('submitBooking');
        if (submitBookingBtn) {
            submitBookingBtn.addEventListener('click', function() {
                const form = document.getElementById('bookingForm');
                if (form.checkValidity()) {
                    // Here you would typically send the form data to the server
                    alert('Thank you! Your booking request has been submitted. We will contact you shortly.');
                    bootstrap.Modal.getInstance(document.getElementById('bookingModal')).hide();
                } else {
                    form.reportValidity();
                }
            });
        }
    });
</script>
</body>
</html>